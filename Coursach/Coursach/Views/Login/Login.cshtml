@model Coursach.ViewModels.LoginViewModel

@using Microsoft.AspNetCore.Mvc.Localization

@inject IViewLocalizer _localizer

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@{
    ViewBag.Title = "Sign in ";
}
<h2>Authentication</h2>

@section HeaderButtons
{

}
@section Center
{
    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()





        <div class="form-horizontal">




            @Html.ValidationSummary(true, "", new { @class = "text-danger" })


            <div class="form-group">
                @Html.LabelFor(model => model.Email, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.Email, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.Email, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.Password, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.Password, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.Password, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group d-flex col-md-10">
                @Html.LabelFor(model => model.RememberMe, htmlAttributes: new { @class = "control-label d-inline-block" })
                <div class="col-sm-1 d-inline-block h-25 w-25">
                    @Html.EditorFor(model => model.RememberMe, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.RememberMe, "", new { @class = "text-danger" })
                </div>
                <a class="ml-auto" href="/Register/Register">@_localizer["Create account"]</a>
            </div>


            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <input type="submit" value="@_localizer["Sign In"]"  class="btn btn-success" />
                </div>
            </div>
        </div>

    }
    <br />
    @*<form method="post" asp-action="ExternalLogin" asp-controller="Login" asp-route-returnUrl="@Url.Action("Index", "Home")>
        <div>
            <frame>
                <div id="fb-root"></div>
                <script async defer crossorigin="anonymous" src="https://connect.facebook.net/ru_RU/sdk.js#xfbml=1&version=v10.0&appId=3950756304947695&autoLogAppEvents=1" nonce="aZ27wScG"></script>
                <div type="submit" class="fb-login-button" data-width="" data-size="small" data-button-type="login_with" data-layout="rounded" data-auto-logout-link="false" data-use-continue-as="false" />
            </frame>
        </div>
    </form>*@
}
@section Scripts
{

    <script>
        window.fbAsyncInit = function () {
            FB.XFBML.parse();
            FB.init({
                appId: '3950756304947695',
                cookie: true,
                xfbml: true,
                version: 'v10.0'
            });

            FB.AppEvents.logPageView();
        };

        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) { return; }
            js = d.createElement(s); js.id = id;
            js.src = "https://connect.facebook.net/en_US/sdk.js";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
    </script>

    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_GB/sdk.js#xfbml=1&autoLogAppEvents=1&version=v10.0&appId=3950756304947695" nonce="P755L5DH"></script>
    <script>
        var finished_rendering = function () {
            console.log("finished rendering plugins");
            var spinner = document.getElementById("spinner");
            spinner.removeAttribute("style");
            spinner.removeChild(spinner.childNodes[0]);
        }

    </script>
}
